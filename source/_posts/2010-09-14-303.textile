---
layout: post
title: '编译安装nginx+php时候碰见的一些问题'
date: 2010-9-14
wordpress_id: 303
permalink: /blogs/303
comments: true
---
<p>安装环境：centos 5.4</p>
<p>安装前可能需要执行下：</p>
<div id="_mcePaste">yum -y install libiconv libmcrypt mhash mcrypt  libtool-ltdl libtool-ltdl-devel libjpeg-devel libpng-devel libmcrypt libmcrypt-devel freetype freetype-devel libxml2 libxml2-devel zlib zlib-devel glibc glibc-devel glib2 glib2-devel bzip2 bzip2-devel ncurses ncurses-devel curl curl-devel e2fsprogs e2fsprogs-devel krb5 krb5-devel libidn libidn-devel openssl openssl-devel openldap openldap-devel nss_ldap openldap-clients openldap-servers</div>
<div></div>
<div>主要是为了安装相应的依赖包</div>
<div></div>
<div>
<div>在安裝 PHP 到系统中时要是发生「undefined reference to libiconv_open'」之类的错误信息，那表示在「./configure 」沒抓好一些环境变数值。错误发生点在建立「-o sapi/cli/php」是出错，没給到要 link 的 iconv 函式库参数。 解决方法：编辑Makefile 大约77 行左右的地方: EXTRA_LIBS = ..... -lcrypt 在最后加上 -liconv，例如: EXTRA_LIBS = ..... -lcrypt -liconv 然后重新再次 make 即可。</div>
<div>也执行<span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;">make ZEND_EXTRA_LIBS='-liconv'</span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;"><br />
</span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;">关于libiconv.so.2: cannot open shared objec的解法参见：</span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;"><a href="http://shineforever.blog.51cto.com/1429204/315548">http://shineforever.blog.51cto.com/1429204/315548</a></span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;"><br />
</span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;">以fast-cgi方式结合nginx需要在安装前打补丁包，执行以下命令：</span></div>
<div><span style="font-family: Tahoma, Arial; font-size: small;"><span style="line-height: normal;">gzip -cd php-5.2.14-fpm-0.5.14.diff.gz | patch -d php-5.2.14 -p1</span></span></div>
<div></div>
<div><span style="font-family: Tahoma, Arial; font-size: small;"><span style="line-height: normal;"><br />
</span></span></div>
<div><span style="font-family: Tahoma, Arial;"><span style="line-height: normal; font-size: small;">当碰见“the page you are looking for is temporarily unavailable. Please try again later”</span></span></div>
<div><span style="font-family: Tahoma, Arial;"><span style="line-height: normal; font-size: small;">重启下php-fpm</span></span></div>
<div><span style="font-family: Tahoma, Arial; line-height: normal; font-size: 12px;"><br />
</span></div>
</div>
